{% load cms_tags sekizai_tags %}
<form action="" method="post" class="{{ instance.tag_class }}" id="calc_form" style="{{ instance.tag_style }}">{% csrf_token %}
    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-message alert-dismissible">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}
    <input class="hidden" type="text" name='comment' value='{{ instance.comment }}'>
    <div class="form-group input-group">
        <div class="input-group-addon">{{ instance.comment }}</div>
        {{ form.comment }}
    </div>
    <hr>
    <div class="plugin_parent">
    {% for plugin in instance.child_plugin_instances %}
        {% render_plugin plugin %}
    {% endfor %}
    </div>
</form>

{# Скрипт затухания сообщений об ошибках #}
{% addtoblock "js" %}<script type="text/javascript" src="{{ STATIC_URL }}jquery/jquery-2.2.4.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}
<script type="text/javascript">
    $(document).ready( function(){
       var hide_delay = 2500;  // starting timeout before first message is hidden
       var hide_next = 800;   // time in mS to wait before hiding next message
       $(".alert-message").slideDown().each( function(index,el) {
          window.setTimeout( function(){
             $(el).slideUp();  // hide the message
          }, hide_delay + hide_next*index);
       });
    });
</script>
{% endaddtoblock %}